export const PITCH_FREQUENCIES: Record<string, number> = {
  C4: 261.63,
  'C‚ôØ4': 277.18,
  'D‚ô≠4': 277.18,
  D4: 293.66,
  'D‚ôØ4': 311.13,
  'E‚ô≠4': 311.13,
  E4: 329.63,
  F4: 349.23,
  'F‚ôØ4': 369.99,
  'G‚ô≠4': 369.99,
  G4: 392.0,
  'G‚ôØ4': 415.30,
  'A‚ô≠4': 415.30,
  A4: 440.0,
  'A‚ôØ4': 466.16,
  'B‚ô≠4': 466.16,
  B4: 493.88
}

export const NOTE_NAME_TO_FREQ: Record<string, number> = {
  C: PITCH_FREQUENCIES.C4,
  'C‚ôØ': PITCH_FREQUENCIES['C‚ôØ4'],
  'D‚ô≠': PITCH_FREQUENCIES['D‚ô≠4'],
  D: PITCH_FREQUENCIES.D4,
  'D‚ôØ': PITCH_FREQUENCIES['D‚ôØ4'],
  'E‚ô≠': PITCH_FREQUENCIES['E‚ô≠4'],
  E: PITCH_FREQUENCIES.E4,
  F: PITCH_FREQUENCIES.F4,
  'F‚ôØ': PITCH_FREQUENCIES['F‚ôØ4'],
  'G‚ô≠': PITCH_FREQUENCIES['G‚ô≠4'],
  G: PITCH_FREQUENCIES.G4,
  'G‚ôØ': PITCH_FREQUENCIES['G‚ôØ4'],
  'A‚ô≠': PITCH_FREQUENCIES['A‚ô≠4'],
  A: PITCH_FREQUENCIES.A4,
  'A‚ôØ': PITCH_FREQUENCIES['A‚ôØ4'],
  'B‚ô≠': PITCH_FREQUENCIES['B‚ô≠4'],
  B: PITCH_FREQUENCIES.B4,
  'B‚ôØ': PITCH_FREQUENCIES.C4,
  'DùÑ´': PITCH_FREQUENCIES.C4,
  'BùÑ™': PITCH_FREQUENCIES['C‚ôØ4'],
  'CùÑ™': PITCH_FREQUENCIES.D4,
  'EùÑ´': PITCH_FREQUENCIES.D4,
  'FùÑ´': PITCH_FREQUENCIES['E‚ô≠4'],
  'F‚ô≠': PITCH_FREQUENCIES.E4,
  'DùÑ™': PITCH_FREQUENCIES.E4,
  'E‚ôØ': PITCH_FREQUENCIES.F4,
  'GùÑ´': PITCH_FREQUENCIES.F4,
  'EùÑ™': PITCH_FREQUENCIES['F‚ôØ4'],
  'FùÑ™': PITCH_FREQUENCIES.G4,
  'AùÑ´': PITCH_FREQUENCIES.G4,
  'GùÑ™': PITCH_FREQUENCIES.A4,
  'BùÑ´': PITCH_FREQUENCIES.A4,
  'CùÑ´': PITCH_FREQUENCIES['B‚ô≠4'],
  'AùÑ™': PITCH_FREQUENCIES.B4,
  'C‚ô≠': PITCH_FREQUENCIES.B4,
  'C#': PITCH_FREQUENCIES['C‚ôØ4'],
  Db: PITCH_FREQUENCIES['D‚ô≠4'],
  'D#': PITCH_FREQUENCIES['D‚ôØ4'],
  Eb: PITCH_FREQUENCIES['E‚ô≠4'],
  'F#': PITCH_FREQUENCIES['F‚ôØ4'],
  Gb: PITCH_FREQUENCIES['G‚ô≠4'],
  'G#': PITCH_FREQUENCIES['G‚ôØ4'],
  Ab: PITCH_FREQUENCIES['A‚ô≠4'],
  'A#': PITCH_FREQUENCIES['A‚ôØ4'],
  Bb: PITCH_FREQUENCIES['B‚ô≠4'],
  'B#': PITCH_FREQUENCIES.C4,
  'Dbb': PITCH_FREQUENCIES.C4,
  'B##': PITCH_FREQUENCIES['C‚ôØ4'],
  'C##': PITCH_FREQUENCIES.D4,
  'Ebb': PITCH_FREQUENCIES.D4,
  'Fbb': PITCH_FREQUENCIES['E‚ô≠4'],
  'Fb': PITCH_FREQUENCIES.E4,
  'D##': PITCH_FREQUENCIES.E4,
  'E#': PITCH_FREQUENCIES.F4,
  'Gbb': PITCH_FREQUENCIES.F4,
  'E##': PITCH_FREQUENCIES['F‚ôØ4'],
  'F##': PITCH_FREQUENCIES.G4,
  'Abb': PITCH_FREQUENCIES.G4,
  'G##': PITCH_FREQUENCIES.A4,
  'Bbb': PITCH_FREQUENCIES.A4,
  'Cbb': PITCH_FREQUENCIES['B‚ô≠4'],
  'A##': PITCH_FREQUENCIES.B4,
  'Cb': PITCH_FREQUENCIES.B4
}

function getNoteFrequency(noteName: string): number {
  return NOTE_NAME_TO_FREQ[noteName] ?? PITCH_FREQUENCIES.C4
}

export function calculatePlaybackRate(targetNoteName: string): number {
  const targetFreq = getNoteFrequency(targetNoteName)
  const baseFreq = PITCH_FREQUENCIES.C4
  return targetFreq / baseFreq
}
